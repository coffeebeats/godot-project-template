config.extends = "gdbuild.ci.toml"

[godot]
  version_file = ".godot-version"

[target.client]
  runnable = true

  pack_files = [
    {include = ["icon.svg", "core", "maps"], embed = true, encrypt = true},
  ]

[target.client.profile.release]
  encrypt = true # Specify via 'SCRIPT_AES256_ENCRYPTION_KEY' environment variable.

[target.client.platform.macos]
  bundle_identifier = "com.coffeebeats.MY_GAME_NAME"

[[target.client.platform.macos.feature.steam.pack_files]]
  include = ["addons/godotsteam"]
  exclude = ["addons/godotsteam/linux*/", "addons/godotsteam/win*/"]
  embed   = true
  encrypt = true

[[target.client.platform.windows.feature.steam.pack_files]]
  include = ["addons/godotsteam"]
  exclude = ["addons/godotsteam/linux*/", "addons/godotsteam/osx"]
  embed   = true
  encrypt = true

[template]
  custom_py_path = "custom.py"

[template.platform.windows]
  # Generate a Windows file icon and use the result as the template's icon.
  hook      = {run_before = ["convert icon.svg -define icon:auto-resize=256,128,64,48,32,16 icon.ico"]}
  icon_path = "icon.ico"
